var remover,zremover,cleaner,cleanerDeb,startTime,mos,blacklist={items:[]};console.log("[cleanext] start.."),remover=function(e){return(e=(Array.isArray(e)?e:[e]).filter(function(e){return e})).map(function(e){return Array.from(document.querySelectorAll(e)).map(function(e){return e.parentNode.removeChild(e)})})},zremover=debounce(350,function(){return Array.from(document.querySelectorAll("*")).map(function(e){var n,t;if(n=window.getComputedStyle(e))return(t=n.zIndex)&&!isNaN(+t)&&500<+t||"fixed"===n.position?e.parentNode.removeChild(e):void 0})}),cleaner=function(e){if(null==e&&(e={}),console.log("[cleanext] cleaner called with opt ",e),(!!blacklist.items.map(function(e){return new RegExp(e)}).filter(function(e){return e.exec(window.location.host)}).length||e.force)&&(console.log("[cleanext] start cleaning ..."),remover([".onesignal-slidedown-container","iframe","ins",".adsbygoogle","._popIn_recommend_article"]),!(15e3<Date.now()-startTime)))return console.log("[cleanext] change detected. start cleaner ..."),remover([".onesignal-slidedown-container","iframe","ins",".adsbygoogle"]),zremover()},cleanerDeb=debounce(500,function(){return setTimeout(function(){return cleaner()},0)}),chrome.storage.sync.get(["blacklist"],function(e){return blacklist.items=e.blacklist||[],console.log("[cleanext] blacklist: ",blacklist.items),chrome.storage}),startTime=Date.now(),(mos=new MutationObserver(cleanerDeb)).observe(document.body,{childList:!0,subtree:!0}),chrome.runtime.onMessage.addListener(function(e,n,t){var o,r,l;return"blacklist"===(e=null==e?{}:e).action?(o=window.location.host.split("."),l="^(.+\\.)*"+(o=function(){for(var e=[],n=o.length-3,t=o.length;n<t;++n)r=n,e.push(o[r]);return e}().filter(function(e){return e})).join("\\."),~blacklist.items.indexOf(l)?console.log("[cleanext] site "+window.location.host+" is already in blacklist."):(console.log("[cleanext] add site "+window.location.host+" into blacklist ..."),blacklist.items.push(l),chrome.storage.sync.set({blacklist:blacklist.items},function(){return console.log("[cleanext] added. force clean now ..."),cleaner({force:!0})}))):(e.action="clean",cleaner({force:!0}))});